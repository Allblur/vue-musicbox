<template>
	<div>
		<banner></banner>
		<div class="m-menu">
			<div class="menu-box">
				<div class="menu-pic"><svg width="50" height="50" viewBox="0 0 50 50" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g class="transform-group"><g transform="scale(0.050, 0.050)"><path d="M510.54537 63.811328c-246.707868 0-446.709995 200.001103-446.709995 446.709995 0 246.707868 200.001103 446.716134 446.709995 446.716134 246.707868 0 446.708971-200.008266 446.708971-446.716134C957.254342 263.812431 757.253238 63.811328 510.54537 63.811328zM361.642039 629.643374c0 16.446577-13.33368 29.78128-29.780257 29.78128s-29.78128-13.33368-29.78128-29.78128l0-59.561537c0-16.445554 13.334703-29.780257 29.78128-29.780257s29.780257 13.33368 29.780257 29.780257L361.642039 629.643374zM480.76409 629.643374c0 16.446577-13.334703 29.78128-29.78128 29.78128-16.445554 0-29.780257-13.33368-29.780257-29.78128L421.202553 465.849914c0-16.446577 13.334703-29.780257 29.780257-29.780257 16.446577 0 29.78128 13.33368 29.78128 29.780257L480.76409 629.643374zM599.887165 629.643374c0 16.446577-13.33368 29.78128-29.780257 29.78128-16.446577 0-29.782304-13.33368-29.782304-29.78128L540.324604 525.411451c0-16.445554 13.334703-29.780257 29.782304-29.780257 16.445554 0 29.780257 13.334703 29.780257 29.780257L599.887165 629.643374zM719.010239 629.643374c0 16.446577-13.334703 29.78128-29.782304 29.78128-16.444531 0-29.780257-13.33368-29.780257-29.78128L659.447678 391.398248c0-16.446577 13.334703-29.78128 29.780257-29.78128 16.446577 0 29.782304 13.334703 29.782304 29.78128L719.010239 629.643374z" fill="#eb4f38"></path></g></g></svg></div>
				<p class="menu-title">云音乐新歌榜</p>
			</div>
			<div class="menu-box">
				<div class="menu-pic"><svg width="50" height="50" viewBox="0 0 50 50" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g class="transform-group"><g transform="scale(0.052, 0.052)"><path d="M734.170009 552.423665c0 153.348574-115.697045 223.192292-223.193315 223.192292-107.49627 0-223.193315-69.843718-223.193315-223.192292l-40.932248 0c0 81.286328 28.705785 149.767002 83.012645 198.040449 43.156916 38.361703 99.589183 61.197804 160.646793 65.376986l0 16.637935L426.855808 832.479035l0 40.932248 168.241772 0 0-40.932248-63.654762 0 0-16.637935c61.057611-4.178159 117.489878-27.015284 160.646793-65.376986 54.30686-48.273447 83.012645-116.755144 83.012645-198.040449L734.170009 552.423665zM488.340137 484.627582c0 39.47506 42.667775 71.475891 95.30153 71.475891s95.30153-32.000831 95.30153-71.475891c0-0.938372-0.047072-1.86958-0.094144-2.798742l0.538259 0 0-261.57753c49.804313 26.425859 81.262792 78.180594 81.262792 78.180594 0-78.452793-54.764278-110.977557-81.262792-122.125455l0-12.149714-38.120203 0 0 263.551488c-16.004509-9.127891-35.966143-14.555507-57.624419-14.555507C531.007913 413.150668 488.340137 445.152523 488.340137 484.627582zM482.049874 743.751225l57.852616 0c91.258447 0 165.501358-74.243935 165.501358-165.501358l0-26.238594-40.932248 0 0 26.238594c0 68.687382-55.881728 124.56911-124.56911 124.56911l-57.852616 0c-68.688405 0-124.56911-55.881728-124.56911-124.56911L357.480764 311.641763c0-68.688405 55.881728-124.56911 124.56911-124.56911l57.852616 0c4.16588 0 8.284687 0.209778 12.346189 0.610914l0-41.083697c-4.076852-0.301875-8.193613-0.460488-12.346189-0.460488l-57.852616 0c-91.258447 0-165.501358 74.243935-165.501358 165.501358l0 266.60708C316.548516 669.50729 390.792451 743.751225 482.049874 743.751225z" fill="#eb4f38"></path></g></g></svg></div>
				<p class="menu-title">每日歌曲推荐</p>
			</div>
			<div class="menu-box">
				<div class="menu-pic"><svg width="50" height="50" viewBox="0 0 50 50" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g class="transform-group"><g transform="scale(0.046, 0.046)"><path d="M511.99849 94.087763c16.046893 0 32.018268 0.046317 47.535533 2.400439 10.63483 1.611033 47.116665-18.060683 74.841531-40.729927 21.566693-17.632753 36.113312-39.809625 40.406714-39.304163 15.47699 1.821474-2.979404 103.849181 34.633175 121.519189 158.050363 74.234373 267.528089 234.896622 267.528089 421.058498 0 256.737191-208.206845 464.943029-464.94605 464.943029-256.736184 0-464.944036-208.205838-464.944036-464.943029C47.054454 302.294608 255.262306 94.087763 511.99849 94.087763L511.99849 94.087763zM657.999335 61.437165c-33.040267 36.066994-62.020731 55.043953-105.401814 67.906035-64.118094 19.014213-208.319617 21.857686-200.976329 115.198907C355.704153 296.454614 546.779679 527.863351 605.857254 605.257361c-85.60625-2.484011-167.003677 1.053213-232.442818 60.442926-76.093102 69.05591-99.872951 197.69385-1.708702 266.513139 141.420478 99.128856 384.529339-54.742891 345.348017-215.349761-10.057878-41.230354-38.715129-70.807908-60.352305-105.875055-51.208688-82.870515-102.425431-165.742037-153.640161-248.609531-14.983611-27.468107-18.446324-40.27481-20.856832-71.511728C615.092499 257.639802 700.769232 222.00678 657.999335 61.437165z" fill="#eb4f38"></path></g></g></svg></div>
				<p class="menu-title">我的歌单</p>
			</div>
		</div>
		<div class="m-t">
			<h3 class="mt-title">推荐歌单</h3>
		</div>
		<div class="mt-box">
			<div class="mt-item" v-for="(item,index) in indexdatas" @click="toDetail(item.id)">
				<div class="mti-box">
					<div class="mti-img"><img :src="item.coverImgUrl" :alt="item.name"></div>
				</div>
				<p>{{item.name}}</p>
			</div>
		</div>
	</div>
</template>
<style lang="stylus">
.m-menu
	display -webkit-flex
	display flex
	flex-direction row
	justify-content space-around
	flex-wrap wrap
	width 100%
	box-sizing border-box
	margin 0px auto
	padding .3rem .2rem
	position relative
	text-align center
    align-items center
.m-menu:after
	content ''
	position absolute
	bottom 0
	left 0
	width 100%
	height 1px
	background-color #dedede
	transform scaleY(0.5)
	transform-origin 0 bottom
	.menu-box
		width 33.333%
		.menu-pic
		.menu-title
			line-height .7rem
			text-align center

.m-t
	padding .35rem .25rem .2rem
	.mt-title
		line-height .8rem
		font-weight normal
		font-size 16px
		color #2a2a2a
.mt-box
	display -webkit-flex
	display flex
	flex-direction row
	justify-content space-around
	flex-wrap wrap
	width 100%
	box-sizing border-box
	margin 0px auto
	padding 0 .2rem
	.mt-item
		width 31%
		overflow hidden
		.mti-img
			img
				width 100%
				height 100%
		p
			max-height 42px
			line-height 21px
			/*white-space nowrap*/
			text-overflow ellipsis
			overflow hidden
			margin-bottom .25rem
@media (max-width 860px)
	.mt-box .mt-item
		width 31.5%
</style>
<script>
	import { mapGetters, mapActions } from 'vuex'
	import Banner from '../../components/Banner.vue'
    
	export default{
		data(){
			return{
                title:'vue-musicbox'
			}
		},
		components:{
            Banner
		},
		computed:{
            ...mapGetters({
                indexData:'indexData'
            }),
            indexdatas(){
                return this.indexData
            }
        },
		methods:{
			...mapActions(['updateIndexData','updatePlaylistDetail']),
			getIndexData(offset,limit){
				let url = 'http://odetoall.applinzi.com/weixin/gettop/'
				let data = {
                    offset:offset,
                    limit:limit
                }
                this.updateIndexData({ajaxurl:url,querydata:data})
			},
			toDetail(id){
				this.$router.push({name: 'detail', params: { playlistId: id }})
			}
		},
		created(){
			this.getIndexData(6,6)
		}
    }
</script>